# Higher-level interface to launch irace.

Higher-level interface to launch irace.

## Usage

``` r
irace_main(scenario, output.width = 9999L)
```

## Arguments

- scenario:

  [`list()`](https://rdrr.io/r/base/list.html)  
  Data structure containing irace settings. The data structure has to be
  the one returned by the function
  [`defaultScenario()`](https://mlopez-ibanez.github.io/irace/reference/defaultScenario.md)
  or
  [`readScenario()`](https://mlopez-ibanez.github.io/irace/reference/readScenario.md).

- output.width:

  `integer(1)`  
  The width used for the screen output.

## Value

(`invisible(data.frame)`)

A data frame with the set of best algorithm configurations found by
irace. The data frame has the following columns:

- `.ID.` : Internal id of the candidate configuration.

- `Parameter names` : One column per parameter name in `parameters`.

- `.PARENT.` : Internal id of the parent candidate configuration.

Additionally, this function saves an R data file containing an object
called `iraceResults`. The path of the file is indicated in
`scenario$logFile`. The `iraceResults` object is a list with the
following structure:

- `scenario`:

  The scenario R object containing the irace options used for the
  execution. See
  [`defaultScenario`](https://mlopez-ibanez.github.io/irace/reference/defaultScenario.md)
  for more information. The element `scenario$parameters` contains the
  parameters R object that describes the target algorithm parameters.
  See
  [`readParameters`](https://mlopez-ibanez.github.io/irace/reference/readParameters.md).

- `allConfigurations`:

  The target algorithm configurations generated by irace. This object is
  a data frame, each row is a candidate configuration, the first column
  (`.ID.`) indicates the internal identifier of the configuration, the
  following columns correspond to the parameter values, each column
  named as the parameter name specified in the parameter object. The
  final column (`.PARENT.`) is the identifier of the configuration from
  which model the actual configuration was sampled.

- `allElites`:

  A list that contains one element per iteration, each element contains
  the internal identifier of the elite candidate configurations of the
  corresponding iteration (identifiers correspond to
  `allConfigurations$.ID.`).

- `iterationElites`:

  A vector containing the best candidate configuration internal
  identifier of each iteration. The best configuration found corresponds
  to the last one of this vector.

- `experiments`:

  A matrix with configurations as columns and instances as rows. Column
  names correspond to the internal identifier of the configuration
  (`allConfigurations$.ID.`).

- `experimen_log`:

  A `data.table` with columns `iteration`, `instance`, `configuration`,
  `time`. This matrix contains the log of all the experiments that irace
  performs during its execution. The instance column refers to the index
  of the `race_state$instances_log` data frame. Time is saved ONLY when
  reported by the `targetRunner`.

- `softRestart`:

  A logical vector that indicates if a soft restart was performed on
  each iteration. If `FALSE`, then no soft restart was performed.

- `state`:

  An environment that contains the state of irace, the recovery is done
  using the information contained in this object.

- `testing`:

  A list that contains the testing results. The elements of this list
  are: `experiments` a matrix with the testing experiments of the
  selected configurations in the same format as the explained above and
  `seeds` a vector with the seeds used to execute each experiment.

## Details

This function checks the correctness of the scenario, reads the
parameter space from `scenario$parameterFile`, invokes
[`irace()`](https://mlopez-ibanez.github.io/irace/reference/irace.md),
prints its results in various formatted ways, (optionally) calls
[`psRace()`](https://mlopez-ibanez.github.io/irace/reference/psRace.md)
and, finally, evaluates the best configurations on the test instances
(if provided). If you want a lower-level interface that just runs irace,
please see function
[`irace()`](https://mlopez-ibanez.github.io/irace/reference/irace.md).

## See also

- [`irace_cmdline()`](https://mlopez-ibanez.github.io/irace/reference/irace_cmdline.md):

  a command-line interface to
  [`irace()`](https://mlopez-ibanez.github.io/irace/reference/irace.md).

- [`readScenario()`](https://mlopez-ibanez.github.io/irace/reference/readScenario.md):

  for reading a configuration scenario from a file.

- [`readParameters()`](https://mlopez-ibanez.github.io/irace/reference/readParameters.md):

  read the target algorithm parameters from a file.

- [`defaultScenario()`](https://mlopez-ibanez.github.io/irace/reference/defaultScenario.md):

  returns the default scenario settings of irace.

## Author

Manuel López-Ibáñez and Jérémie Dubois-Lacoste
